<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>NavigableVector.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">matrix</a> &gt; <a href="index.source.html" class="el_package">Matrix</a> &gt; <span class="el_source">NavigableVector.java</span></div><h1>NavigableVector.java</h1><pre class="source lang-java linenums">package Matrix;

import java.util.Collections;
import java.util.Comparator;
import java.util.Map;
import java.util.NavigableMap;
import java.util.Objects;
import java.util.TreeMap;
import java.util.function.BinaryOperator;

public class NavigableVector&lt;T&gt; extends AbstractMatrix&lt;Integer, T&gt; {

    private NavigableVector(NavigableMap&lt;Integer,T&gt; matrix, T zero, int rows, int columns){
<span class="fc" id="L14">        super(matrix, zero, rows, columns);</span>
<span class="fc" id="L15">    }</span>
    
    public static &lt;S&gt; NavigableVector&lt;S&gt; from(Map&lt;Integer, S&gt; vector, S zero) {
<span class="fc" id="L18">        Objects.requireNonNull(vector);</span>
<span class="fc" id="L19">        Objects.requireNonNull(zero);</span>

<span class="fc" id="L21">        int rows = Collections.max(vector.keySet());</span>
<span class="fc" id="L22">        int columns = 1;</span>

<span class="fc" id="L24">        NavigableMap&lt;Integer, S&gt; navigableMap = new TreeMap&lt;&gt;(vector);</span>
<span class="fc" id="L25">        navigableMap.values().removeIf(value -&gt; value.equals(zero));</span>

<span class="fc" id="L27">        return new NavigableVector&lt;S&gt;(navigableMap, zero, rows, columns);</span>
    }

    public PeekingIterator&lt;Map.Entry&lt;Integer,T&gt;&gt; peekingIterator(){
<span class="fc" id="L31">        return PeekingIterator.from(this.representation().entrySet().iterator());</span>
    }

    @Override
    public NavigableVector&lt;T&gt; merge(Matrix&lt;Integer, T&gt; other, BinaryOperator&lt;T&gt; op) {
<span class="fc" id="L36">        InconsistentZeroException.requireMatching(this, other);</span>
<span class="fc" id="L37">        return NavigableVector.from(MapMerger.merge(this.peekingIterator(), other.peekingIterator(),Comparator.naturalOrder(), op, 0, this.zero()), this.zero());</span>
    }

    @Override
    public NavigableVector&lt;T&gt; entryWiseMultiplication(AbstractMatrix&lt;Integer, T&gt; multiplier, BinaryOperator&lt;T&gt; multiply){
<span class="fc" id="L42">        InvalidMatrixOperationException.requireSameMatrixSizes(this.size(), multiplier.size());</span>
<span class="fc" id="L43">        InconsistentZeroException.requireMatching(this, multiplier);</span>
<span class="fc" id="L44">        return this.merge(multiplier, multiply);</span>
    }

    @Override
    public AbstractMatrix&lt;Integer, T&gt; multiply(AbstractMatrix&lt;Integer ,T&gt; multiplier, BinaryOperator&lt;T&gt; multiply, BinaryOperator&lt;T&gt; add){
<span class="fc" id="L49">        InvalidMatrixOperationException.requireMultipliableMatrices(this.size(), multiplier.size());</span>
<span class="fc" id="L50">        InconsistentZeroException.requireMatching(this, multiplier);</span>
<span class="fc" id="L51">        NavigableVector&lt;T&gt; entryWise = entryWiseMultiplication(multiplier.transpose(), multiply);</span>
<span class="fc" id="L52">        Map&lt;Integer, T&gt; result = new TreeMap&lt;&gt;();</span>
<span class="fc" id="L53">        result.put(0, entryWise.matrix.values().stream().reduce(zero(), add));</span>
<span class="fc" id="L54">        return NavigableVector.from(result, zero());</span>
    }

    public NavigableVector&lt;T&gt; transpose(){
<span class="fc" id="L58">        int rows = this.getRows();</span>
<span class="fc" id="L59">        this.setRows(this.getColumns());</span>
<span class="fc" id="L60">        this.setColumns(rows);</span>
<span class="fc" id="L61">        return this;</span>
    }

    @Override
    public NavigableVector&lt;T&gt; row(Integer row) {
<span class="fc" id="L66">        InvalidMatrixOperationException.requireValidVectorInput(new Indexes(row, this.size().column()), this.size());</span>
<span class="fc" id="L67">        NavigableMap&lt;Integer, T&gt; rowMap = new TreeMap&lt;&gt;();</span>
<span class="fc" id="L68">        rowMap.putAll(this.matrix.subMap(row, true, row, true));</span>
<span class="fc" id="L69">        return new NavigableVector&lt;&gt;(rowMap, this.zero(), 1, this.getColumns());</span>
    }
    
    @Override
    public NavigableVector&lt;T&gt; column(Integer column) {
<span class="fc" id="L74">        InvalidMatrixOperationException.requireValidVectorInput(new Indexes(this.size().row(), column), this.size());</span>
<span class="fc" id="L75">        NavigableMap&lt;Integer, T&gt; columnMap = new TreeMap&lt;&gt;();</span>
<span class="fc bfc" id="L76" title="All 2 branches covered.">        for (Integer rowIndex : this.matrix.keySet()) {</span>
<span class="fc" id="L77">            columnMap.put(rowIndex, this.value(column));</span>
<span class="fc" id="L78">        }</span>
<span class="fc" id="L79">        return new NavigableVector&lt;&gt;(columnMap, this.zero(), this.getRows(), 1);</span>
    }
    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>